<div v-view-setup="RiskAssCtrl" v-init="init()">
	<div v-page v-transition="native">
		<div class="bg_box">
			<div class="box_cont">
				<!-- <div class="safe_cont1 bor_bott">
			    	<dl  v-repeat="test in testList">
						<dt >{{test.question}}、{{test.subject}}</dt>
						<dt v-repeat="tq in test.content">
							<input type="radio"  name="q{{test.question}}" value="{{tq.riskOption}}" required-message="请选择该题" required /> 
							<span class="pl5">{{tq.riskOption}}、{{tq.subject}}</span>
						</dt>
					</dl>
			    </div> -->
			    <div class="zz_cont">
			    	<ul class="lineheight1">
			    		<li class="size2">1、你的年龄是？</li>
			    		<li class="lineheight1">35岁以下<img src="images/dh.png" class="dh_img"/></li>
			    		<li class="lineheight1">35至55岁</li>
			    		<li class="lineheight1">55岁以上</li>
			    	</ul>
			    </div>
			    <div class="j-heightb"></div>
			    <div class="zz_cont">
			    	<ul>
			    		<li class="size2">1、你的年龄是？</li>
			    		<li class="lineheight1">35岁以下<img src="images/dh.png" class="dh_img"/></li>
			    		<li class="lineheight1">35至55岁</li>
			    		<li class="lineheight1">55岁以上</li>
			    	</ul>
			    </div>
			</div>
		</div>
		<div class="zz_cont">
					<input type="button" class="button_1" name="button" value="提交"  v-click="toEstimate()">
				</div>
	</div>
</div>
<script>
RiskAssCtrl.$inject = ["$scope","$remote","$targets","$filter","$context"];
function RiskAssCtrl($scope,$remote,$targets,$filter,$context){
	$scope.init=function(){
		var params={
				"pageSize":50,
				"currentIndex":1
			}
		$remote.post("/pmobile/QueryFxpgProblem.do?",params,function(data){
			$scope.testList=data.List;
		});
	}
	//获取评估结果
	$scope.toEstimate=function(){
		var str1="";
		var str2="";
    	var obj = {};
    	for(var i=0;i<$scope.testList.length;i++){
    		obj = $scope.testList[i];
    		var radArr = document.getElementsByName("q"+obj.question);
    		// 选中标志位
    		var falg = false;    	
    		for(var j=0;j<radArr.length;j++){
    			if(radArr[j].checked){
    				falg=true;
    				//score = score+(radArr[j].value-0);
    				if(i==0){
    					str1=str1+obj.question;
    	    			str2= str2+radArr[j].value;
    	    		}else{
    	    			str1=str1+","+obj.question;
    	    			str2= str2+","+radArr[j].value;
    	    		}
    				break;
    			}
    		}
    		if(!falg){
    			//$scope.toast("请选择第"+(i+1)+"题");
    			NativeCall.toast("请选择第"+obj.question+"题");
				return;
    		}
    	}
    	console.log(str1);
    	console.log(str2);
    	var params={
    			"AcNo":"",
				"optionList":str2,
				"questionList":str1
		}
		$remote.post("/pmobile/PingGuInfo.do?",params,function(data){
			$scope.testList=data.List;
		}); 
	}
}
</script>