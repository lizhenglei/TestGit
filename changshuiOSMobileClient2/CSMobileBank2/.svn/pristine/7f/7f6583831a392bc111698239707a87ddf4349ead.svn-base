<div v-view-setup="PFundBuyCtrl" v-init="init()">
	<div v-page v-transition="native" title="我要提款录入">
		<div class="zz_cont" style="background-color: white">
			<ul>
				<li><em>付款账号：</em> <i> <select v-change=""
						v-model="payCard" name="payCard"
						v-options="ac.AcNo1 for ac in acList">
					</select>
				</i></li>
				<li><em>可用余额：</em> <i class="colff6"
							ui-money='{"amounts":"balance"}'></i></li>
				<li><em>贷款账号：</em><i>{{num.contractNo}}</i></li>
				<li><em>提款金额：</em><i><input type="text"
						placeholder="请输入提款金额" name="amount" v-model="amount" class="y_srk"></i></li>
				<li><em>大写金额：</em><i>{{amount|amount}}</i></li>
				<li><em>还款方式：</em><select class="sel1" id="sel1"
					style="margin-top: 10px;" v-model="sel1">
						<option value="">每月付息到期还本</option>
						<option value="1">等额本息</option>
				</select></li>
				<li><em>贷款用途：</em><select class="sel2" id="sel2"
					style="margin-top: 10px;" v-model="sel2">
						<option value="">购物</option>
						<option value="2">旅游</option>
						<option value="3">买车</option>
						<option value="4">教育</option>
						<option value="5">耐用消费品</option>
						<option value="6">其他消费</option>
				</select></li>
				<li><em>贷款期限：</em><select class="sel3" id="sel3"
					v-change="change()" style="margin-top: 10px;" v-model="sel3">
						<option value="9">3个月</option>
						<option value="7">6个月</option>
						<option value="8">9个月</option>
						<option value="">12个月</option>
				</select></li>

			</ul>
		</div>
		<div class="zz_cont" style="background-color: white">
			<input type="checkbox" name="agree" v-model="agree" /> 已阅读并同意<a
				style="color: blue" v-click="toXieYiPage()">《客户贷款用途承诺》</a>
			<div>
				<input type="submit" class="button_1" name="Submit" value="下一步"
					v-disabled="!agree" v-click="toconfirm()">
			</div>
		</div>
	</div>
</div>
<script>
	PFundBuyCtrl.$inject = [ "$scope", "$remote", "$targets", "$filter",
			"$context" ];
	function PFundBuyCtrl($scope, $remote, $targets, $filter, $context) {
		$scope.init = function() {
			$remote.post("/pmobile/ActListQry.do",{},function(data) {
						//过滤器json添加一个acno1的字段，这里写麻烦了 可以用循环写
						$scope.acList = data.PayerList;
						var filterFn = $filter("filter");
						$scope.acList = filterFn(
								$scope.acList,
								function(obj, text) {
									if (obj.AcNo != undefined) {
										obj.AcNo1 = obj.AcNo.substring(0, 4)+ "****"+ obj.AcNo.substring(obj.AcNo.length - 4);
										obj.AcNo2 = obj.AcNo1
										if (obj.AcAlias.length > 4) {
											obj.AcNo1 = obj.AcNo1+ " / "+ obj.AcAlias.substring(0,4)+ "...";
										} else if (obj.AcAlias.length<=4&&obj.AcAlias.length>0) {
											obj.AcNo1 = obj.AcNo1+ " / "+ obj.AcAlias;
										} else {
											obj.AcNo1 = obj.AcNo1;
										}
									return true;
								}
						});
						if(vx.isEmpty($scope.payCard)){
							$scope.payCard=$scope.acList[0];
						}
// 						$scope.getCardInfo();
			});
		
		}
// 		$scope.getCardInfo=function(){
// 			console.log()
// 			var cardNo=$scope.payCard.AcNo;
// 			//查询余额
// 			$remote.post("/pmobile/ActBalQry.do",{"AcNo":cardNo},function(data){
// 				$scope.cardInfo=data;
// 				$scope.balance=data.AvailBal;
// 			});
// 			//转给本人时，过滤掉当前选中的付款账号
// 			if($scope.acList){
// 				var temp=[];
// 				vx.forEach($scope.acList,function(item){
// 					if($scope.payCard.AcNo!=item.AcNo){
// 						temp.push(item);
// 					}
// 				});
// 				$scope.rAcList=temp;
// 				if($scope.rAcList){
// 					$scope.selfRCard=$scope.rAcList[0];
// 				}
// 			}
// 		}
	}
</script>