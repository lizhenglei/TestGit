//
//  CSIIWelcomeViewController.m
//  MobileClient
//
//  Created by wangfaguo on 13-8-2.
//  Copyright (c) 2013年 pro. All rights reserved.
//

#import "CSIIWelcomeViewController.h"
#import "CSIIMenuViewController.h"

@interface CSIIWelcomeViewController ()

@end

@implementation CSIIWelcomeViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}
- (id)initWithToViewController:(UIViewController*)viewController{
    self = [super init];
    if (self) {
        // Custom initialization
        self.toViewController = viewController;
    }
    return self;
}
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"skinSelect"] isEqualToString:@"0"]) {
        [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]];
    }else if([[[NSUserDefaults standardUserDefaults] objectForKey:@"skinSelect"] isEqualToString:@"1"]){
        [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"640X960背景"]]];
    }else if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"skinSelect"] isEqualToString:@"2"]){
        [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"640X960背景2"]]];
    }else {
        [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"640X960背景3"]]];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
	// Do any additional setup after loading the view.
    UIImageView *welcomeImage = [[UIImageView alloc]initWithImage:IMAGE(@"欢迎登录手机银行")];
    welcomeImage.frame = CGRectMake(74, 108, 172,18);
    [self.view addSubview:welcomeImage];
    
    UILabel *message = [[UILabel alloc]initWithFrame:CGRectMake(20, 208, 300, 20)];
    message.backgroundColor = [UIColor clearColor];
    message.textColor=[UIColor whiteColor];
    message.font = [UIFont boldSystemFontOfSize:18];
    message.textAlignment = NSTextAlignmentCenter;
    message.text =@"预留信息：我的手机银行" ;
    [self.view addSubview:message];
    
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(89, 311,156, 30);
    [button setBackgroundImage:IMAGE(@"开通手机银行木板") forState:UIControlStateNormal];
    [button setTitle:@"进入手机银行" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(goToMobileBank:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
}
-(void)goToMobileBank:(UIButton*)button{

    if (self.toViewController != nil) {
        
//        if([NSStringFromClass(self.toViewController.class) isEqualToString:NSStringFromClass([MainViewController class])] )
//        {
//            ((MainViewController*)self.toViewController).isloginActionSucceedBack = YES;
//        }else
         if([NSStringFromClass(self.toViewController.class) isEqualToString:NSStringFromClass([CSIIMenuViewController class])] )
        {
            ((CSIIMenuViewController*)self.toViewController).isloginActionSucceedBack = YES;
        }
        
    }
    [self.navigationController popToViewController:self.navigationController.viewControllers[[self.navigationController.viewControllers count] - 3] animated:NO];
  
}
-(void)addAnimation:(UIViewController*)controller{
    
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];
    [animation setDuration:0.8];
    animation.type = @"flip",
    animation.subtype = kCATransitionFromLeft;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionDefault];
    [self.navigationController pushViewController:controller animated:NO];
    [self.navigationController.view.layer addAnimation:animation forKey:nil];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end
