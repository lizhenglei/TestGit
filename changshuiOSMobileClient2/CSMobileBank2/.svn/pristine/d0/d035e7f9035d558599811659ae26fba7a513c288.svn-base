<div v-view-setup="AssetPieCtrl" v-init="init()">
	<div  class="bg_box" v-page v-transition="native" title="资产负债表">
    <div class="box_cont">
    
      <div class="bcfff mt_18 zczl_cont" style="height:200px;-webkit-tap-highlight-color:rgba(0,0,0,0);">
        <h2 class="font_title" style="text-align:center" >资产总额</h2>
       <div style="position:absolute;z-index:1" class="echartCss" ui-echarts='{"param":"params1"}' style="margin:0px;" ></div>
       <div v-show="fl1" style="position:absolute;z-index:2;padding-top:40px;padding-left:25px"><img style="width:100px;" src="images/weiqu.png"></div>
      </div>
      <div class="j-heighta"></div> 
      <div class="bcfff mt_18 zczl_cont" style="height:200px;-webkit-tap-highlight-color:rgba(0,0,0,0);">
        <h2 class="font_title" style="text-align:center">负债总额</h2>
       	<div style="position:absolute;z-index:1" class="echartCss" ui-echarts='{"param":"params2"}' style="margin:0px;"></div>
       	<div v-show="fl2" style="position:absolute;z-index:2;padding-top:40px;padding-left:25px"><img style="width:100px;" src="images/weiqu.png"></div>
       	
      </div> 
    </div>
 </div>

        <div class="zz_cont"><img src="images/ts.png" />
		    <font class="tishi">
				温馨提示</br>
			</font>
				&nbsp;&nbsp;资产信息供参考，请以实际信息为准。</br>
<!-- 				&nbsp;&nbsp;2、账户如有外币资产，将会被折算成人民币资产统计。</br> -->
<!-- 				&nbsp;&nbsp;3、信用卡如有美元账单，将被折算成人民币负债计入到总负债中。</br> -->
			<div style="font-size:12px; line-height:16px; color:#929292;"> </div>
	   </div>
 		<div style="width:100%;height:40px"></div>
</div>
<script>
AssetPieCtrl.$inject = ["$scope","$remote","$targets","$context","$timeout"];
function AssetPieCtrl($scope,$remote,$targets,$context,$timeout){
	
	$scope.init=function(){
		$scope.fl1=false;
		$scope.fl2=false;
		$scope.zichandata=[];
		$scope.zichanNames=[];
		$scope.fuzhaidata=[];
		$scope.fuzhaiNames=[];
		$scope.zichang=$context.getJson().zichang;
		$scope.fuzhai=$context.getJson().fuzhai;
		if($scope.zichang=="0"){
			$scope.fl1=true;
		}
		if($scope.fuzhai=="0"){
			$scope.fl2=true;
		}
		$scope.zichan=[
		               {
		            	   "name":"活期",
		            	   "amount":$context.getJson().currentAmount
		               },
		               {
		            	   "name":"定期",
		            	   "amount":$context.getJson().regularAmount
		               },
		               {
		            	   "name":"理财",
		            	   "amount":$context.getJson().licai
		               },
		               {
		            	   "name":"其他",
		            	   "amount":$context.getJson().frzAmount
		               }
		 ];
		$scope.fuzhai=[
		               {
		            	   "name":"贷    款",
		            	   "amount":$context.getJson().loanAmount
		               },
		               {
		            	   "name":"信用卡",
		            	   "amount":$context.getJson().debtAmount
		               }
		];
		$scope.zichandata=$scope.getData($scope.zichandata,$scope.zichanNames,$scope.zichan);
		$scope.fuzhaidata=$scope.getData($scope.fuzhaidata,$scope.fuzhaiNames,$scope.fuzhai);
		$scope.params1 = {
				etype : 'pie',
				legend:{
					zlevel:"999",
					backgroundColor:'rgba(0,0,0,0)',
					orient:"vertical",
					x:"52%",
					y:"center",
					data:$scope.zichandata.dataNameList
				},
				color:["rgb(169,216,110)","rgb(248,162,15)","rgb(95,174,227)","rgb(198,198,198)"],
				series:[
				   {
					 legendHoverLink:false,
				     name:"访问来源",
				     type:"pie",
				     center:["30%","50%"],
				     minAngle:35,
				     selectedMode:"single",
				     radius:60,
				     itemStyle:
				     	{
				    	 normal:{
				    		 label:{
				    			 position:"inner",
				    			 formatter:"{d}%"
				    		 },
				    		 labelLine:{
				    			 show:false
				    		 }
				    	 },
				    	 emphasis:{
				    		 label:{
				    			 show:true,
				    			 formatter:"{b}\n{d}%"
				    		 }
				    	 }
				     	},
				     data:$scope.zichandata.dataList
				     }
				  ]
			};
		$scope.params2 = {
				etype : 'pie',
				legend:{
					backgroundColor:'rgba(0,0,0,0)',
					z:"5",
					orient:"vertical",
					x:"52%",
					y:"center",
					data:$scope.fuzhaidata.dataNameList
				},
				color:["rgb(207,75,75)","rgb(124,50,151)"],
				calculable:false,
				series:[
				   {
					 legendHoverLink:false,
				     name:"访问来源",
				     type:"pie",
				     center:["30%","50%"],
				     minAngle:35,
				     selectedMode:"single",
				     radius:60,
// 				     radius: [
// 						'30%',
// 						'50%'
//            				 ],
				     itemStyle:
				     	{
				    	 normal:{
				    		 label:{
				    			 position:"inner",
				    			 formatter:"{d}%"
				    		 },
				    		 labelLine:{
				    			 show:false
				    		 }
				    	 },
				    	 emphasis:{
				    		 label:{
				    			 show:true,
				    			 formatter:"{b}\n{d}%"
				    		 }
				    	 }
				     	},
				     data:$scope.fuzhaidata.dataList
				     }
				  ]
			};
	}
	
	//封装数据
	$scope.getData=function(dataList,dataNameList,datas){
		vx.forEach(datas,function(item){
			var temp={};
			if(item.amount!='0.00'){
				temp.value=item.amount;
			}
			temp.name=item.name+"   "+item.amount+"元";
			dataNameList.push(temp.name);
			dataList.push(temp);
		});
		return {"dataList":dataList,"dataNameList":dataNameList}
	}
	
	
}
</script>